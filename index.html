<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no" />
  <title>Gastos ‚Äî iPhone App</title>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
<div class="app" id="app">
  <header class="topbar">
    <div class="topbar-inner">
      <div>
        <div class="title" id="topTitle">A√±adir Gasto</div>
        <div class="subtitle" id="topSubtitle">Registra un gasto r√°pido</div>
      </div>
      <div class="avatar-wrap" id="avatarWrap">
        <img id="userAvatar" class="avatar" alt="Tu foto" src=""/>
        <span class="avatar-edit" title="Cambiar foto">‚úö</span>
        <input id="avatarInput" type="file" accept="image/*" capture="user" class="hidden"/>
      </div>
    </div>
  </header>

  <main class="content">
    <!-- ADD -->
    <section id="view-add" class="section">
      <div class="card">
        <div class="row">
          <div style="width:100%">
            <label>Nombre del gasto</label>
            <input id="in-name" type="text" placeholder="Almuerzo de trabajo" autocomplete="off"/>
          </div>
        </div>
        <div class="row grid-2">
          <div>
            <label>Importe</label>
            <input id="in-amount" type="number" step="0.01" inputmode="decimal" placeholder="0.00"/>
          </div>
          <div>
            <label>Fecha</label>
            <input id="in-date" type="date"/>
          </div>
        </div>
        <div class="row grid-2">
          <div>
            <label>Categor√≠a</label>
            <select id="in-category"></select>
          </div>
          <div>
            <label>M√©todo de pago</label>
            <select id="in-method"></select>
          </div>
        </div>
        <div class="row" style="justify-content:space-between">
          <div>
            <label style="display:block">Gasto recurrente</label>
            <span class="small">Se repetir√° autom√°ticamente</span>
          </div>
          <label class="switch">
            <input id="in-rec" type="checkbox">
            <span class="slider"></span>
          </label>
        </div>
        <div id="rec-extra" class="row hidden grid-2">
          <div>
            <label>Frecuencia</label>
            <select id="in-rec-freq">
              <option value="weekly">Semanal</option>
              <option value="monthly">Mensual</option>
            </select>
          </div>
          <div>
            <label>Fin (opcional)</label>
            <input id="in-rec-end" type="date"/>
          </div>
        </div>
        <div class="row">
          <div style="width:100%">
            <label>Notas</label>
            <textarea id="in-notes" placeholder="Detalle opcional"></textarea>
          </div>
        </div>
        <div class="actions">
          <button id="btn-clear" class="btn btn-lite">Limpiar</button>
          <button id="btn-save" class="btn btn-primary">Guardar gasto</button>
        </div>
      </div>
    </section>

    <!-- CONFIG -->
    <section id="view-config" class="section hidden">
      <div class="card">
        <h3 style="margin:0 0 8px">Categor√≠as</h3>
        <div id="cats" class="list"></div>
        <div class="row" style="margin-top:10px">
          <input id="in-new-cat" type="text" placeholder="A√±adir categor√≠a"/>
          <button id="btn-add-cat" class="btn btn-ghost">A√±adir</button>
        </div>
      </div>
      <div class="card">
        <h3 style="margin:0 0 8px">M√©todos de pago</h3>
        <div id="methods" class="list"></div>
        <div class="row" style="margin-top:10px">
          <input id="in-new-method" type="text" placeholder="A√±adir m√©todo (Tarjeta, Bizum...)"/>
          <button id="btn-add-method" class="btn btn-ghost">A√±adir</button>
        </div>
      </div>
      <div class="card">
        <div class="grid-2">
          <div>
            <label>Presupuesto mensual (opcional)</label>
            <input id="in-budget" type="number" step="0.01" placeholder="2000"/>
          </div>
          <div>
            <label>Moneda</label>
            <select id="in-currency">
              <option value="EUR">‚Ç¨ Euro</option>
              <option value="USD">$ D√≥lar</option>
              <option value="MXN">$ Peso MXN</option>
            </select>
          </div>
        </div>
        <div class="small" style="margin-top:8px">Estas preferencias se usan en el dashboard y al a√±adir gastos.</div>
        <div class="actions" style="margin-top:10px">
          <button id="btn-save-settings" class="btn btn-primary">Guardar configuraci√≥n</button>
        </div>
      </div>
      <div class="card danger-zone">
        <div style="display:flex;align-items:center;gap:10px">
          <div style="font-weight:700">Zona peligrosa</div>
          <div class="small">Exporta antes de borrar datos üòâ</div>
        </div>
        <div class="actions" style="margin-top:10px">
          <button id="btn-export-json" class="btn btn-lite">Exportar JSON</button>
          <button id="btn-import-json" class="btn btn-lite">Importar JSON</button>
          <button id="btn-wipe" class="btn btn-danger">Borrar todo</button>
        </div>
      </div>
    </section>

    <!-- HISTORY -->
    <section id="view-history" class="section hidden">
      <div class="actions" style="margin-bottom:10px">
        <button id="btn-export-csv" class="btn btn-lite" style="flex:unset">Exportar CSV</button>
        <button id="btn-sort" class="btn btn-lite right" style="flex:unset">Ordenar por fecha ‚ñº</button>
      </div>
      <div id="history" class="list"></div>
      <div class="small" style="margin:10px auto 30px;text-align:center" id="historyEmpty">Sin gastos a√∫n.</div>
    </section>

    <!-- DASHBOARD -->
    <section id="view-dash" class="section hidden">
      <div class="kpis" id="kpis"></div>
      <div class="card" style="margin-top:12px">
        <h3 style="margin:0 0 10px">Gastos por categor√≠a</h3>
        <canvas id="chartByCat" height="220"></canvas>
      </div>
      <div class="card" style="margin-top:12px">
        <h3 style="margin:0 0 10px">Flujo mensual (semanas)</h3>
        <canvas id="chartFlow" height="220"></canvas>
      </div>
      <div class="card" style="margin-top:12px;margin-bottom:24px">
        <h3 style="margin:0 0 10px">Distribuci√≥n de gastos</h3>
        <canvas id="chartPie" height="240"></canvas>
      </div>
    </section>
  </main>

  <!-- Tabs -->
  <nav class="tabs">
    <button class="tab active" data-view="add" title="A√±adir gasto">
      <span>‚ûï</span>
      <span>A√±adir</span>
    </button>
    <button class="tab" data-view="config" title="Configuraci√≥n">
      <span>‚öôÔ∏è</span>
      <span>Config</span>
    </button>
    <button class="tab" data-view="history" title="Hist√≥rico">
      <span>üìú</span>
      <span>Historial</span>
    </button>
    <button class="tab" data-view="dash" title="Dashboard">
      <span>üìä</span>
      <span>Dashboard</span>
    </button>
  </nav>
</div>

<!-- Charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="js/app.js"></script>
</body>
</html>
